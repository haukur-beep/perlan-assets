<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Perlan AI</title>
  <style>
    @font-face {
      font-family: 'UnitOT';
      src: url('https://raw.githubusercontent.com/haukur-beep/perlan-assets/main/fonts/UnitOT.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
    }
  </style>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <style type="text/tailwindcss">
    :root {
      --accent-color: #007aff;
    }
    body {
      font-family: "UnitOT", Arial, sans-serif;
      background-color: #f5f5f7;
    }
    .top-bar-select {
      @apply w-48 appearance-none rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 shadow-sm focus:border-[var(--accent-color)] focus:outline-none focus:ring-1 focus:ring-[var(--accent-color)];
    }
    .action-button {
      @apply flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium transition-colors;
    }
    .primary-button {
      @apply bg-[var(--accent-color)] text-white hover:bg-blue-600;
    }
    .secondary-button {
      @apply bg-gray-200 text-gray-800 hover:bg-gray-300;
    }
    .icon-button {
      @apply rounded-lg p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-800 transition-colors duration-200;
    }
    .panel {
      @apply rounded-xl border border-gray-200/60 bg-white shadow-lg shadow-gray-300/40;
    }
    .panel-header {
      @apply border-b border-gray-200/60 px-6 py-4 text-sm font-semibold uppercase tracking-wider text-gray-600;
    }
  </style>
</head>

<body class="text-gray-900">
  <div class="flex h-screen w-full flex-col bg-gray-100">
    <header class="flex h-20 shrink-0 items-center justify-between border-b border-gray-200/50 bg-white/98 px-8 backdrop-blur-md" style="box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.08), 0 1px 2px 0 rgba(0, 0, 0, 0.04);">
      <div class="flex items-center gap-4">
        <img src="https://raw.githubusercontent.com/haukur-beep/perlan-assets/main/images/Perlan_logo_black.png" alt="Perlan Logo" class="h-8 w-8" style="max-width: 32px; max-height: 32px; object-fit: contain;" />
        <h1 class="text-2xl font-semibold tracking-tight">Perlan AI</h1>
        <div class="ml-6 flex items-center gap-4">
          <div class="relative">
            <select class="top-bar-select" id="class-grade-header" name="class-grade-header">
              <option selected="">10. bekkur</option>
              <option>9. bekkur</option>
              <option>8. bekkur</option>
              <option>7. bekkur</option>
              <option>6. bekkur</option>
              <option>5. bekkur</option>
              <option>4. bekkur</option>
              <option>3. bekkur</option>
              <option>2. bekkur</option>
              <option>1. bekkur</option>
            </select>
          </div>
          <div class="relative">
            <select class="top-bar-select" id="subject-header" name="subject-header">
              <option selected="">Náttúrufræði</option>
              <option>Stærðfræði</option>
              <option>Saga</option>
              <option>Íslenska</option>
            </select>
          </div>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div class="h-9 w-9 rounded-full bg-cover bg-center" style='background-image: url("https://cdn-icons-png.freepik.com/512/7235/7235968.png");'></div>
      </div>
    </header>
    <div class="flex flex-1 overflow-hidden">
      <aside class="flex w-80 flex-col gap-6 border-r border-gray-200/50 bg-white p-6" style="box-shadow: 1px 0 3px 0 rgba(0, 0, 0, 0.05);">
        <div class="panel flex-1 flex-col">
          <h3 class="panel-header">Mitt efni</h3>
          <ul class="divide-y divide-gray-200 p-2">
            <li class="flex cursor-pointer items-center gap-3 rounded-md bg-gray-100 p-2">
              <svg class="h-6 w-6 text-[var(--accent-color)]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
              <div>
                <p class="font-medium text-sm text-gray-800">Íslensk náttúra</p>
                <p class="text-xs text-gray-500">Íslenska, 10. bekkur, Verkefni</p>
              </div>
            </li>
            <li class="flex cursor-pointer items-center gap-3 rounded-md p-2 hover:bg-gray-50">
              <svg class="h-6 w-6 text-gray-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
              <div>
                <p class="font-medium text-sm">Fallbeyging Lýsingarorða</p>
                <p class="text-xs text-gray-500">Íslenska, 10. bekkur, Verkefnablað</p>
              </div>
            </li>
            <li class="flex cursor-pointer items-center gap-3 rounded-md p-2 hover:bg-gray-50">
              <svg class="h-6 w-6 text-gray-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
              <div>
                <p class="font-medium text-sm">Íslandssaga: Landnám</p>
                <p class="text-xs text-gray-500">Saga, 8. bekkur, Kynning</p>
              </div>
            </li>
          </ul>
        </div>
        <div class="panel flex-1 flex-col">
          <h3 class="panel-header">Sameiginlegt svæði</h3>
          <ul class="divide-y divide-gray-200 p-2" id="shared-content">
            <!-- Dynamic shared content will be populated here -->
          </ul>
        </div>
      </aside>
      <main class="flex flex-1 flex-col p-8 bg-white" style="box-shadow: inset 1px 0 3px 0 rgba(0, 0, 0, 0.05);">
        <div class="flex-1 overflow-y-auto">
          <div class="panel flex h-full flex-col">
            <div class="flex items-center justify-end gap-2 border-b border-gray-200 p-2">
              <button class="icon-button">
                <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 4v5h5" stroke-linecap="round" stroke-linejoin="round"></path>
                  <path d="M20 12A8 8 0 1013.43 5.07" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </button>
              <button class="icon-button">
                <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </button>
              <button class="icon-button">
                <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </button>
            </div>
            <div class="flex-1 overflow-y-auto bg-white p-8" style="font-family: 'UnitOT', sans-serif;">
              <div class="h-full w-full focus:outline-none" contenteditable="true">
                <h2 class="mb-4 text-3xl font-bold">Verkefni: Íslensk náttúra</h2>
                <p class="mb-6 text-gray-500">10. bekkur - Náttúrufræði</p>
                <h3 class="mt-6 mb-2 text-xl font-semibold">Inngangur</h3>
                <p class="mb-4 text-gray-700 leading-relaxed">Ísland er þekkt fyrir stórbrotna og einstaka náttúru. Frá jöklum og eldfjöllum til fossa og norðurljósa, landslagið er síbreytilegt og heillandi. Í þessu verkefni munuð þið kanna mismunandi þætti íslenskrar náttúru, sögu hennar og mikilvægi fyrir íslenska menningu.</p>
                <h3 class="mt-6 mb-2 text-xl font-semibold">1. Hluti: Rannsókn</h3>
                <p class="mb-4 text-gray-700 leading-relaxed">Veldu eitt af eftirfarandi náttúrufyrirbærum til að rannsaka:</p>
                <ul class="list-disc list-inside mb-4 pl-4 text-gray-700 space-y-2">
                  <li>Jöklar (t.d. Vatnajökull, Langjökull)</li>
                  <li>Eldfjöll (t.d. Hekla, Katla, Eyjafjallajökull)</li>
                  <li>Fossar (t.d. Gullfoss, Seljalandsfoss, Skógafoss)</li>
                  <li>Jarðhitasvæði (t.d. Geysir, Bláa Lónið)</li>
                  <li>Norðurljós</li>
                </ul>
                <p class="mb-4 text-gray-700 leading-relaxed">Safnaðu upplýsingum um:</p>
                <ul class="list-disc list-inside mb-4 pl-4 text-gray-700 space-y-2">
                  <li>Staðsetningu og myndun</li>
                  <li>Sögulegt og menningarlegt mikilvægi</li>
                  <li>Áhrif á umhverfi og samfélag</li>
                  <li>Núverandi ástand og framtíðarhorfur</li>
                </ul>
                <h3 class="mt-6 mb-2 text-xl font-semibold">2. Hluti: Skriflegt verkefni</h3>
                <p class="mb-4 text-gray-700 leading-relaxed">Skrifaðu 500-700 orða ritgerð um náttúrufyrirbærið sem þú valdir. Gættu að málfari, stafsetningu og heimildanotkun. Ritgerðin á að innihalda inngang, meginmál og lokaorð.</p>
                <h3 class="mt-6 mb-2 text-xl font-semibold">3. Hluti: Kynning</h3>
                <p class="mb-4 text-gray-700 leading-relaxed">Undirbúðu 5-7 mínútna kynningu fyrir bekkinn. Notaðu myndir eða myndbönd til að styðja við efnið. Vertu tilbúin/n að svara spurningum frá samnemendum.</p>
                <h3 class="mt-6 mb-2 text-xl font-semibold">Skilafrestur</h3>
                <p class="mb-4 text-gray-700 leading-relaxed">Verkefninu skal skilað eigi síðar en föstudaginn 25. október.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="mt-8">
          <div class="mb-4 flex items-center gap-4">
            <div class="relative">
              <select class="top-bar-select" id="output-type" name="output-type">
                <option>Verkefni</option>
                <option>Verkefnablað</option>
                <option>Spurningakeppni</option>
                <option>Kynning</option>
              </select>
            </div>
            <div class="relative">
              <select class="top-bar-select" id="difficulty" name="difficulty">
                <option>Erfiðleikastig</option>
                <option>Auðvelt</option>
                <option>Miðlungs</option>
                <option>Erfitt</option>
              </select>
            </div>
            <div class="relative">
              <select class="top-bar-select" id="length" name="length">
                <option>Lengd</option>
                <option>Stutt</option>
                <option>Miðlungs</option>
                <option>Löng</option>
              </select>
            </div>
          </div>
          <div class="panel flex items-center gap-4 p-4">
            <textarea class="w-full flex-1 resize-none border-0 bg-transparent p-4 text-base placeholder-gray-400 focus:ring-0 rounded-lg" placeholder="Skrifaðu inn fyrirmæli hér... til dæmis: 'Búðu til verkefni um íslenska náttúru fyrir 10. bekk.'" rows="3"></textarea>
            <button class="action-button primary-button">
              <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"></path>
              </svg>
              <span>Búa til</span>
            </button>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    // Demo content for all grades and subjects
    const demoContent = {
      'Náttúrufræði': {
        '10': [
          { title: 'Líffræði: Frumur og vefir', type: 'Verkefni', content: 'Rannsakaðu uppbyggingu fruma og mismunandi vefja í mannslíkamanum.' },
          { title: 'Efnafræði: Sýru-base jafnvægi', type: 'Verkefnablað', content: 'Lærum um pH-gildi og hvernig sýrur og basar haga sér í lausnum.' },
          { title: 'Eðlisfræði: Rafsegulfræði', type: 'Kynning', content: 'Kynntu þér grundvallaratriði rafsegulfræði og notkun hennar.' }
        ],
        '9': [
          { title: 'Mannslíkaminn: Blóðrásarkerfið', type: 'Verkefni', content: 'Lærðu um hjarta, æðar og blóðflæði í mannslíkamanum.' },
          { title: 'Plöntur: Ljóstillífun', type: 'Verkefnablað', content: 'Rannsakaðu hvernig plöntur breyta ljósi í orku.' },
          { title: 'Veðurfar og loftslag', type: 'Próf', content: 'Prófaðu þekkingu þína á veðurfari og loftslagsbreytingum.' }
        ],
        '8': [
          { title: 'Dýr í náttúrunni', type: 'Verkefni', content: 'Rannsakaðu mismunandi dýrategundir og lífsskilyrði þeirra.' },
          { title: 'Jarðfræði: Bergtegundir', type: 'Verkefnablað', content: 'Lærðu um mismunandi bergtegundir og myndun þeirra.' }
        ],
        '7': [
          { title: 'Vatn og loft', type: 'Verkefni', content: 'Lærðu um mikilvægi vatns og lofts fyrir líf á jörðu.' },
          { title: 'Sólarkerfi', type: 'Verkefnablað', content: 'Kannaðu reikistjörnur og tungl í sólarkerfinu.' }
        ],
        '6': [
          { title: 'Plöntur í kringum okkur', type: 'Verkefni', content: 'Rannsakaðu mismunandi plöntur og vöxt þeirra.' },
          { title: 'Veðurfar', type: 'Verkefnablað', content: 'Lærðu um veður og loftslag.' }
        ],
        '5': [
          { title: 'Mannslíkaminn', type: 'Verkefni', content: 'Lærðu um líkamshluta og virkni þeirra.' },
          { title: 'Dýr og ungar', type: 'Verkefnablað', content: 'Rannsakaðu hvernig dýr ala upp unga sína.' }
        ],
        '4': [
          { title: 'Árstíðir', type: 'Verkefni', content: 'Lærðu um fjórar árstíðir og breytingar þeirra.' },
          { title: 'Steinar og jarðvegur', type: 'Verkefnablað', content: 'Kannaðu mismunandi steina og jarðveg.' }
        ],
        '3': [
          { title: 'Dýr á Íslandi', type: 'Verkefni', content: 'Lærðu um íslensk dýr og búsvæði þeirra.' },
          { title: 'Vatn í náttúrunni', type: 'Verkefnablað', content: 'Rannsakaðu vatn í ám, vötnum og sjó.' }
        ],
        '2': [
          { title: 'Líkaminn minn', type: 'Verkefni', content: 'Lærðu um líkamann þinn og skynfæri.' },
          { title: 'Dýr og fæða', type: 'Verkefnablað', content: 'Hvað borða mismunandi dýr?' }
        ],
        '1': [
          { title: 'Litir í náttúrunni', type: 'Verkefni', content: 'Finndu mismunandi liti í náttúrunni.' },
          { title: 'Veður í dag', type: 'Verkefnablað', content: 'Hvað er veðrið í dag?' }
        ]
      },
      'Stærðfræði': {
        '10': [
          { title: 'Algebra: Annars stigs jöfnur', type: 'Verkefni', content: 'Leysðu annars stigs jöfnur með mismunandi aðferðum.' },
          { title: 'Rúmfræði: Þríhyrningar', type: 'Verkefnablað', content: 'Reiknað flatarmál og ummál þríhyrninga.' },
          { title: 'Tölfræði og líkindi', type: 'Próf', content: 'Prófaðu þekkingu þína á tölfræði og líkindareikning.' }
        ],
        '9': [
          { title: 'Línuleg föll', type: 'Verkefni', content: 'Lærðu um línuleg föll og graf þeirra.' },
          { title: 'Prósentur og vextir', type: 'Verkefnablað', content: 'Reiknaðu prósentur og samsetta vexti.' }
        ],
        '8': [
          { title: 'Brot og aukastafir', type: 'Verkefni', content: 'Æfðu þig í reikningum með brotum og aukastöfum.' },
          { title: 'Flatarmál og ummál', type: 'Verkefnablað', content: 'Reiknaðu flatarmál og ummál grunnforma.' }
        ],
        '7': [
          { title: 'Margföldun og deiling', type: 'Verkefni', content: 'Æfðu þig í margföldun og deilingu.' },
          { title: 'Brot og heiltölur', type: 'Verkefnablað', content: 'Lærðu um brot og tengsl við heiltölur.' }
        ],
        '6': [
          { title: 'Samlagning og frádráttur', type: 'Verkefni', content: 'Æfðu þig í samlagning og frádrætti stórra talna.' },
          { title: 'Mælieiningar', type: 'Verkefnablað', content: 'Lærðu um lengd, þyngd og rúmmál.' }
        ],
        '5': [
          { title: 'Tölur til 1000', type: 'Verkefni', content: 'Æfðu þig með tölur til 1000.' },
          { title: 'Klukkan og tími', type: 'Verkefnablað', content: 'Lærðu að lesa klukku og reikna tíma.' }
        ],
        '4': [
          { title: 'Tölur til 100', type: 'Verkefni', content: 'Æfðu þig með tölur til 100.' },
          { title: 'Peningar', type: 'Verkefnablað', content: 'Lærðu að telja peninga og reikna.' }
        ],
        '3': [
          { title: 'Samlagning og frádráttur', type: 'Verkefni', content: 'Æfðu þig í einfaldri samlagning og frádrætti.' },
          { title: 'Mynstur og röð', type: 'Verkefnablað', content: 'Finndu mynstur í tölum og hlutum.' }
        ],
        '2': [
          { title: 'Tölur til 20', type: 'Verkefni', content: 'Lærðu tölur frá 1 til 20.' },
          { title: 'Stærðir og form', type: 'Verkefnablað', content: 'Berðu saman stærðir og lærðu form.' }
        ],
        '1': [
          { title: 'Tölur til 10', type: 'Verkefni', content: 'Lærðu tölur frá 1 til 10.' },
          { title: 'Telja og flokka', type: 'Verkefnablað', content: 'Teldu hluti og flokkaðu þá.' }
        ]
      },
      'Saga': {
        '10': [
          { title: 'Heimsstyrjöldin fyrri', type: 'Verkefni', content: 'Rannsakaðu orsakir og afleiðingar fyrri heimsstyrjaldarinnar.' },
          { title: 'Íslandssaga: Sjálfstæðisbarátta', type: 'Kynning', content: 'Kynntu þér baráttu Íslendinga fyrir sjálfstæði.' }
        ],
        '9': [
          { title: 'Miðaldir í Evrópu', type: 'Verkefni', content: 'Lærðu um samfélag og menningu miðalda.' },
          { title: 'Víkingaöld', type: 'Verkefnablað', content: 'Rannsakaðu víkingaferðir og áhrif þeirra.' }
        ],
        '8': [
          { title: 'Landnám Íslands', type: 'Verkefni', content: 'Lærðu um fyrstu landnámsmenn og byggð Íslands.' },
          { title: 'Fornaldarkonungar', type: 'Kynning', content: 'Kynntu þér sögu fornaldarkonunga Noregs.' }
        ],
        '7': [
          { title: 'Íslenska þjóðsaga', type: 'Verkefni', content: 'Lærðu um íslenskar þjóðsögur og goðafræði.' },
          { title: 'Fyrstu íbúar', type: 'Verkefnablað', content: 'Hverjir bjuggu á Íslandi fyrir landnám?' }
        ],
        '6': [
          { title: 'Saga Reykjavíkur', type: 'Verkefni', content: 'Lærðu um sögu höfuðborgarinnar.' },
          { title: 'Íslensk hefð', type: 'Verkefnablað', content: 'Kannaðu íslenska hefð og siði.' }
        ],
        '5': [
          { title: 'Fjölskyldan mín', type: 'Verkefni', content: 'Rannsakaðu sögu fjölskyldunnar þinnar.' },
          { title: 'Gamla dagar', type: 'Verkefnablað', content: 'Hvernig lifðu börn áður fyrr?' }
        ],
        '4': [
          { title: 'Hverfið mitt', type: 'Verkefni', content: 'Lærðu um sögu hverfisins þíns.' },
          { title: 'Íslensk dýr í sögunni', type: 'Verkefnablað', content: 'Hvaða dýr lifðu á Íslandi áður?' }
        ],
        '3': [
          { title: 'Gamla tíminn', type: 'Verkefni', content: 'Hvernig var lífið áður fyrr?' },
          { title: 'Íslensk nöfn', type: 'Verkefnablað', content: 'Hvaðan koma íslensk nöfn?' }
        ],
        '2': [
          { title: 'Afi og amma', type: 'Verkefni', content: 'Hvað geta afi og amma sagt þér?' },
          { title: 'Gömul leikföng', type: 'Verkefnablað', content: 'Hvernig leikföng voru notuð áður?' }
        ],
        '1': [
          { title: 'Fjölskyldan', type: 'Verkefni', content: 'Hver eru í fjölskyldunni þinni?' },
          { title: 'Áður og nú', type: 'Verkefnablað', content: 'Hvað er öðruvísi í dag en áður?' }
        ]
      },
      'Íslenska': {
        '10': [
          { title: 'Ljóðagreining: Nútímaljóð', type: 'Verkefni', content: 'Greindu nútímaljóð og túlkaðu þau.' },
          { title: 'Ritgerðarskrif', type: 'Verkefnablað', content: 'Lærðu að skrifa vel uppbyggða ritgerð.' }
        ],
        '9': [
          { title: 'Málfræði: Fallbeyging', type: 'Verkefni', content: 'Æfðu þig í fallbeygingu nafnorða og lýsingarorða.' },
          { title: 'Bókmenntir: Íslendingasögur', type: 'Verkefnablað', content: 'Lestu og greindu íslendingasögur.' }
        ],
        '8': [
          { title: 'Stafsetning og málfar', type: 'Verkefni', content: 'Bættu stafsetning og málfar með æfingum.' },
          { title: 'Frásagnarlist', type: 'Verkefnablað', content: 'Lærðu að segja góðar sögur.' }
        ],
        '7': [
          { title: 'Lestrarskil', type: 'Verkefni', content: 'Æfðu þig í að skilja það sem þú lest.' },
          { title: 'Orðaforði', type: 'Verkefnablað', content: 'Stækkaðu orðaforða þinn.' }
        ],
        '6': [
          { title: 'Setningafræði', type: 'Verkefni', content: 'Lærðu um uppbyggingu setninga.' },
          { title: 'Skrifað mál', type: 'Verkefnablað', content: 'Æfðu þig í að skrifa skýrt.' }
        ],
        '5': [
          { title: 'Lestur og skilningur', type: 'Verkefni', content: 'Lestu sögur og svaraðu spurningum.' },
          { title: 'Stafir og hljóð', type: 'Verkefnablað', content: 'Tengdu stafi við hljóð.' }
        ],
        '4': [
          { title: 'Lestur fyrir alla', type: 'Verkefni', content: 'Lestu upphátt fyrir aðra.' },
          { title: 'Orð og merking', type: 'Verkefnablað', content: 'Hvað þýða orðin?' }
        ],
        '3': [
          { title: 'Stafir og orð', type: 'Verkefni', content: 'Lærðu að þekkja stafi og orð.' },
          { title: 'Mín fyrsta saga', type: 'Verkefnablað', content: 'Skrifaðu þína fyrstu sögu.' }
        ],
        '2': [
          { title: 'Stafakerfið', type: 'Verkefni', content: 'Lærðu íslenska stafi.' },
          { title: 'Orð og myndir', type: 'Verkefnablað', content: 'Tengdu orð við myndir.' }
        ],
        '1': [
          { title: 'Fyrstu orðin', type: 'Verkefni', content: 'Lærðu fyrstu orðin þín.' },
          { title: 'Hlustun og skilningur', type: 'Verkefnablað', content: 'Hlusttu og skildu einfaldar sögur.' }
        ]
      }
    };

    // Shared content for all grades and subjects
    const sharedContent = {
      'Náttúrufræði': {
        '10': [
          { title: 'Rannsóknir í náttúrufræði', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt rannsóknarverkefni fyrir alla nemendur í 10. bekk.' },
          { title: 'Náttúrufræði próf - fyrri hluti', type: 'Próf', content: 'Sameiginlegt próf fyrir öll náttúrufræðiefni fyrri hluta.' }
        ],
        '9': [
          { title: 'Vísindaverkefni: Tilraunir', type: 'Sameiginlegt verkefni', content: 'Sameiginlegar tilraunir fyrir alla 9. bekk.' },
          { title: 'Náttúrufræði keppni', type: 'Keppni', content: 'Sameiginleg náttúrufræðikeppni fyrir bekkinn.' }
        ],
        '8': [
          { title: 'Umhverfisverkefni', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt verkefni um umhverfisvernd.' },
          { title: 'Náttúruskoðun', type: 'Vettvangsferð', content: 'Sameiginleg náttúruskoðun fyrir bekkinn.' }
        ]
      },
      'Stærðfræði': {
        '10': [
          { title: 'Stærðfræði olympíada', type: 'Keppni', content: 'Sameiginleg stærðfræðikeppni fyrir 10. bekk.' },
          { title: 'Reiknirit og forritun', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt verkefni um reiknirit.' }
        ],
        '9': [
          { title: 'Stærðfræðiverkefni hópa', type: 'Hópverkefni', content: 'Sameiginlegt hópverkefni í stærðfræði.' },
          { title: 'Algebra keppni', type: 'Keppni', content: 'Sameiginleg algebra keppni fyrir bekkinn.' }
        ],
        '8': [
          { title: 'Rúmfræði verkefni', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt verkefni um rúmfræði.' },
          { title: 'Stærðfræði leikir', type: 'Leikur', content: 'Sameiginlegir stærðfræðileikir fyrir bekkinn.' }
        ]
      },
      'Saga': {
        '10': [
          { title: 'Sögurannsókn: Íslandssaga', type: 'Rannsóknarverkefni', content: 'Sameiginleg rannsókn á íslandssögu.' },
          { title: 'Heimsósaga verkefni', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt verkefni um heimssögu.' }
        ],
        '9': [
          { title: 'Miðaldaverkefni', type: 'Hópverkefni', content: 'Sameiginlegt verkefni um miðaldir.' },
          { title: 'Víkingaöld kynning', type: 'Sameiginleg kynning', content: 'Sameiginleg kynning um víkingaöld.' }
        ],
        '8': [
          { title: 'Landnámsverkefni', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt verkefni um landnám Íslands.' },
          { title: 'Fornaldarkonungar', type: 'Sameiginleg kynning', content: 'Sameiginleg kynning um fornaldarkonunga.' }
        ]
      },
      'Íslenska': {
        '10': [
          { title: 'Ljóðakeppni bekkjarins', type: 'Keppni', content: 'Sameiginleg ljóðakeppni fyrir allan bekkinn.' },
          { title: 'Ritgerðaskrif: Sameiginlegt efni', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt verkefni í ritgerðarskrifi.' }
        ],
        '9': [
          { title: 'Bókmenntaverkefni', type: 'Hópverkefni', content: 'Sameiginlegt bókmenntaverkefni fyrir bekkinn.' },
          { title: 'Málfræði keppni', type: 'Keppni', content: 'Sameiginleg málfræðikeppni.' }
        ],
        '8': [
          { title: 'Frásagnarverkefni', type: 'Sameiginlegt verkefni', content: 'Sameiginlegt verkefni í frásagnarlist.' },
          { title: 'Stafsetningarkeppni', type: 'Keppni', content: 'Sameiginleg stafsetningarkeppni.' }
        ]
      }
    };

    document.addEventListener('DOMContentLoaded', function() {
      const gradeSelect = document.getElementById('class-grade-header');
      const subjectSelect = document.getElementById('subject-header');
      const sidebarList = document.querySelector('aside ul');
      const sharedList = document.getElementById('shared-content');
      const contentArea = document.querySelector('[contenteditable="true"]');

      // Function to update sidebar based on selected grade and subject
      function updateSidebar() {
        const selectedGrade = gradeSelect.value.replace('. bekkur', '');
        const selectedSubject = subjectSelect.value;
        
        const materials = demoContent[selectedSubject]?.[selectedGrade] || [];
        const sharedMaterials = sharedContent[selectedSubject]?.[selectedGrade] || [];
        
        // Update main content sidebar
        sidebarList.innerHTML = materials.map((material, index) => `
          <li class="sidebar-item ${index === 0 ? 'active' : ''}" data-material='${JSON.stringify(material)}'>
            <svg class="h-6 w-6 ${index === 0 ? 'text-[var(--accent-color)]' : 'text-gray-400'}" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <div class="flex-1">
              <p class="font-semibold text-sm ${index === 0 ? 'text-gray-800' : 'text-gray-700'}">${material.title}</p>
              <p class="text-xs text-gray-500 mt-1">${selectedSubject}, ${gradeSelect.value}, ${material.type}</p>
            </div>
          </li>
        `).join('');

        // Update shared content sidebar
        sharedList.innerHTML = sharedMaterials.map((material, index) => `
          <li class="sidebar-item" data-material='${JSON.stringify(material)}'>
            <svg class="h-6 w-6 text-purple-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <div class="flex-1">
              <p class="font-semibold text-sm text-gray-700">${material.title}</p>
              <p class="text-xs text-gray-500 mt-1">${selectedSubject}, ${gradeSelect.value}, ${material.type}</p>
            </div>
          </li>
        `).join('');

        // Load first material content
        if (materials.length > 0) {
          loadMaterialContent(materials[0], selectedSubject, gradeSelect.value);
        }

        // Add click handlers to new items
        addSidebarClickHandlers();
      }

      // Function to load material content
      function loadMaterialContent(material, subject, grade) {
        contentArea.innerHTML = `
          <h2 class="mb-4 text-3xl font-bold">${material.title}</h2>
          <p class="mb-6 text-gray-500">${grade} - ${subject}</p>
          <h3 class="mt-6 mb-2 text-xl font-semibold">Verkefnislýsing</h3>
          <p class="mb-4 text-gray-700 leading-relaxed">${material.content}</p>
          <h3 class="mt-6 mb-2 text-xl font-semibold">Leiðbeiningar</h3>
          <p class="mb-4 text-gray-700 leading-relaxed">Nákvæmar leiðbeiningar fyrir þetta verkefni koma hér. Þetta er dæmi um efni sem væri búið til fyrir ${subject} í ${grade}.</p>
          <h3 class="mt-6 mb-2 text-xl font-semibold">Markmið</h3>
          <ul class="list-disc list-inside mb-4 pl-4 text-gray-700 space-y-2">
            <li>Nemandi skilur grundvallaratriði efnisins</li>
            <li>Nemandi getur beitt þekkingu sinni í verklegum dæmum</li>
            <li>Nemandi þróar gagnrýna hugsun um efnið</li>
          </ul>
        `;
      }

      // Function to add click handlers to sidebar items
      function addSidebarClickHandlers() {
        const allSidebarItems = document.querySelectorAll('aside li');
        allSidebarItems.forEach(item => {
          item.addEventListener('click', function() {
            // Remove active state from all items
            allSidebarItems.forEach(i => {
              i.classList.remove('active');
              i.querySelector('svg').classList.remove('text-[var(--accent-color)]', 'text-purple-400');
              i.querySelector('svg').classList.add('text-gray-400');
              i.querySelector('p').classList.remove('text-gray-800');
              i.querySelector('p').classList.add('text-gray-700');
            });
            
            // Add active state to clicked item
            this.classList.add('active');
            const svg = this.querySelector('svg');
            const isShared = this.closest('#shared-content');
            svg.classList.remove('text-gray-400');
            svg.classList.add(isShared ? 'text-purple-400' : 'text-[var(--accent-color)]');
            this.querySelector('p').classList.remove('text-gray-700');
            this.querySelector('p').classList.add('text-gray-800');
            
            // Load content based on clicked item
            const materialData = JSON.parse(this.getAttribute('data-material'));
            const selectedSubject = subjectSelect.value;
            const selectedGrade = gradeSelect.value;
            loadMaterialContent(materialData, selectedSubject, selectedGrade);
          });
        });
      }

      // Update sidebar when dropdowns change
      gradeSelect.addEventListener('change', updateSidebar);
      subjectSelect.addEventListener('change', updateSidebar);

      // Initialize with default values
      updateSidebar();

      // Toolbar buttons functionality
      const refreshBtn = document.querySelector('.icon-button:nth-child(1)');
      refreshBtn.addEventListener('click', function() {
        location.reload();
      });

      const editBtn = document.querySelector('.icon-button:nth-child(2)');
      editBtn.addEventListener('click', function() {
        contentArea.focus();
      });

      const downloadBtn = document.querySelector('.icon-button:nth-child(3)');
      downloadBtn.addEventListener('click', function() {
        const content = contentArea.innerHTML;
        const blob = new Blob([content], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'verkefni.html';
        a.click();
        URL.revokeObjectURL(url);
      });

      // Generate button functionality
      const generateBtn = document.querySelector('.action-button.primary-button');
      const textarea = document.querySelector('textarea');
      
      generateBtn.addEventListener('click', function() {
        const prompt = textarea.value.trim();
        if (!prompt) {
          alert('Vinsamlegast skrifaðu fyrirmæli áður en þú smellir á "Búa til"');
          return;
        }
        
        const selectedSubject = subjectSelect.value;
        const selectedGrade = gradeSelect.value;
        
        contentArea.innerHTML = `
          <h2 class="mb-4 text-3xl font-bold">Nýtt verkefni: ${prompt}</h2>
          <p class="mb-6 text-gray-500">${selectedGrade} - ${selectedSubject}</p>
          <h3 class="mt-6 mb-2 text-xl font-semibold">Verkefnislýsing</h3>
          <p class="mb-4 text-gray-700 leading-relaxed">Þetta verkefni var búið til út frá fyrirmælunum: "${prompt}" fyrir ${selectedSubject} í ${selectedGrade}.</p>
          <h3 class="mt-6 mb-2 text-xl font-semibold">Leiðbeiningar</h3>
          <p class="mb-4 text-gray-700 leading-relaxed">Hér koma nákvæmar leiðbeiningar fyrir verkefnið sem var búið til með gervigreind.</p>
          <h3 class="mt-6 mb-2 text-xl font-semibold">Markmið</h3>
          <ul class="list-disc list-inside mb-4 pl-4 text-gray-700 space-y-2">
            <li>Nemandi nær settum markmiðum fyrir ${selectedSubject}</li>
            <li>Verkefnið er aðlagað ${selectedGrade}</li>
            <li>Efnið er í samræmi við námskrá</li>
          </ul>
        `;
        textarea.value = '';
      });
    });
  </script>

</body>

</html>